(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{520:function(s,e,a){"use strict";a.r(e);var n=a(30),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("p",[s._v("protobuf 性能和效率大幅度优于JSON、XML等其它的结构化数据格式。")]),s._v(" "),a("h3",{attrs:{id:"示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),a("div",{staticClass:"language-proto line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('syntax = "proto3";\npackage main;\n\nmessage Student {\n    string name = 1;\n    bool male = 2;\n    repeated int32 scores = 3;\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ul",[a("li",[s._v('protobuf有两个版本，默认版本是proto2，如果需要proto3，则需要在非空非注释的第一行使用syntax="proto3"标明版本。')]),s._v(" "),a("li",[s._v("package，即包名声明符是可选的，用来防止不同的消息类型有命名冲突。")]),s._v(" "),a("li",[s._v("消息类型使用message关键字定义，Student是类型名，name，male，scores是该类型的3个字段，类型分别为string，bool和[]int32。")]),s._v(" "),a("li",[s._v("repeated表示字段可重复，即用来表示Go语言中的数组类型。")]),s._v(" "),a("li",[s._v("每个字符 = 后面的数字称为标识符，每个字段都需要提供一个唯一的标识符。")]),s._v(" "),a("li",[s._v(".proto文件可以写注释，单行注释//，多行注释/* */")]),s._v(" "),a("li",[s._v("一个.proto文件中可以写多个消息类型，即对应多个结构体（struct）。")]),s._v(" "),a("li",[s._v("reserved可以在版本升级时使用。")])]),s._v(" "),a("h3",{attrs:{id:"枚举"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#枚举"}},[s._v("#")]),s._v(" 枚举")]),s._v(" "),a("p",[s._v("枚举类型适用于提供一组预定义的值，选择其中一个。例如我们将性别定义为枚举类型。")]),s._v(" "),a("div",{staticClass:"language-proto line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("message Student {\n    string name = 1;\n    enum Gender {\n        FEMALE = 0;\n        MALE = 1;\n    }\n\n    Gender gender = 2;\n    repeated int32 scores = 3;\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"定义服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义服务"}},[s._v("#")]),s._v(" 定义服务")]),s._v(" "),a("div",{staticClass:"language-proto3 line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("service SearchService {\n    rpc Search (SearchRequest) returns (SearchResponse);\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);